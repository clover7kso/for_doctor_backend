# Migration `20201031102750-init`

This migration has been generated by woony at 10/31/2020, 7:27:50 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE `likeProduct` DROP FOREIGN KEY `likeProduct_ibfk_3`

ALTER TABLE `likeProduct` ADD COLUMN `userDoctorId` varchar(191)  

ALTER TABLE `likeProduct` ADD FOREIGN KEY (`userId`) REFERENCES `User`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `likeProduct` ADD FOREIGN KEY (`userDoctorId`) REFERENCES `UserDoctor`(`id`) ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201031102307-init..20201031102750-init
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "mysql"
-  url = "***"
+  url = "***"
 }
 model HomeAD {
   id        String    @id @default(cuid())
@@ -36,8 +36,9 @@
   rooms  Room[]    @relation(name: "RoomParticipants")
   UserDoctor   UserDoctor[]   @relation("userDoctorId")
   UserMarketer UserMarketer[] @relation("userMarketId")
+  likeProduct  likeProduct[]
 }
 model UserDoctor {
   id     String @id @default(cuid())
@@ -144,12 +145,14 @@
   id        String   @id @default(cuid())
   createdAt DateTime @default(now())
   updatedAt DateTime @default(now()) @updatedAt
-  userId    String
-  user      UserDoctor @relation(fields: [userId], references: [userId])
-  productId String
-  product   Product    @relation(fields: [productId], references: [id])
+  userId       String
+  user         User        @relation(fields: [userId], references: [id])
+  productId    String
+  product      Product     @relation(fields: [productId], references: [id])
+  UserDoctor   UserDoctor? @relation(fields: [userDoctorId], references: [id])
+  userDoctorId String?
 }
 model Room {
   createdAt    DateTime  @default(now())
```


