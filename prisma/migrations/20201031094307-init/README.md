# Migration `20201031094307-init`

This migration has been generated by woony at 10/31/2020, 6:43:07 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE `detailImage` ALTER COLUMN `imgOrder` DROP DEFAULT

ALTER TABLE `sampleImage` ALTER COLUMN `imgOrder` DROP DEFAULT

CREATE UNIQUE INDEX `detailImage.productId_imgOrder_unique` ON `detailImage`(`productId`, `imgOrder`)

CREATE UNIQUE INDEX `sampleImage.productId_imgOrder_unique` ON `sampleImage`(`productId`, `imgOrder`)
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201031093242-init..20201031094307-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,12 +1,11 @@
 generator client {
-  provider        = "prisma-client-js"
-  previewFeatures = ["atomicNumberOperations"]
+  provider = "prisma-client-js"
 }
 datasource db {
   provider = "mysql"
-  url = "***"
+  url = "***"
 }
 model HomeAD {
   id        String    @id @default(cuid())
@@ -124,9 +123,10 @@
   url       String
   productId String
   product   Product @relation(fields: [productId], references: [id])
-  imgOrder  Int     @default(0)
+  imgOrder  Int
+  @@unique([productId, imgOrder])
 }
 model detailImage {
   id        String   @id @default(cuid())
@@ -135,9 +135,10 @@
   url       String
   productId String
   product   Product @relation(fields: [productId], references: [id])
-  imgOrder  Int     @default(0)
+  imgOrder  Int
+  @@unique([productId, imgOrder])
 }
 model likeProduct {
   id        String   @id @default(cuid())
```


